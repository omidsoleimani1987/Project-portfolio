const resultModal=document.querySelector(".result"),successIcon=document.getElementById("success"),failureIcon=document.getElementById("failure"),resultMessage=document.getElementById("result-message"),showResultModal=(c,a)=>{!0==c?(successIcon.style.display="block",failureIcon.style.display="none"):!1==c&&(successIcon.style.display="none",failureIcon.style.display="block"),resultMessage.textContent=a,resultModal.classList.add("show-result"),setTimeout(()=>{resultModal.classList.remove("show-result"),successIcon.style.display="none",failureIcon.style.display="none",resultMessage.textContent=""},2e3)},separateButton=document.querySelector(".scroll-to-top");document.addEventListener("scroll",()=>{const b=document.documentElement.scrollTop;1200<b?separateButton.style.opacity=1:(separateButton.style.display="flex",separateButton.style.opacity=0)}),separateButton.addEventListener("click",()=>{window.scrollTo(0,0)});const itemsContainer=document.querySelector(".modal__items"),singleItemContainer=document.querySelector(".single-product");function sendHttpRequest(d,a,b){return fetch(a,{method:d,body:JSON.stringify(b),headers:{"Content-Type":"application/json"}}).then(b=>200<=b.status&&300>b.status?b.json():b.json().then(b=>{throw showResultModal(!1,b),new Error("Server-side problem!")})).catch(b=>{throw showResultModal(!1,b),new Error("Something went wrong!")})}async function getProduct(x){try{const a=await sendHttpRequest("GET",`http://localhost/projects/davici/api/product/read.php?tn=${x}`);itemsContainer.innerHTML="";for(const u of a){const a=u.id,b=u["product-title"],d=u["product-price"],e=u["product-size"],f=u["product-description"],g=u["product-image-one"],h=u["product-image-two"],i=u["product-image-three"],j=u["product-image-four"],c={category:x,id:a,title:b,price:d,image:g,count:1},k=document.createElement("div");k.classList.add("modal__item"),k.style.backgroundImage=g;const l=document.createElement("div");l.classList.add("item__icons"),k.appendChild(l);const m=document.createElement("div");m.setAttribute("id","item-preview"),l.appendChild(m);const n=document.createElement("i");n.classList.add("fas","fa-search"),m.appendChild(n);const o=document.createElement("div");o.setAttribute("id","item-favorite"),l.appendChild(o),o.addEventListener("click",()=>{addToFavorite(c)});const p=document.createElement("i");p.classList.add("far","fa-heart"),o.appendChild(p);const q=document.createElement("div");q.setAttribute("id","item-card"),l.appendChild(q),q.addEventListener("click",()=>{addToChart(c)});const r=document.createElement("i");r.classList.add("fas","fa-shopping-cart"),q.appendChild(r),itemsContainer.appendChild(k),k.addEventListener("mouseenter",b=>{b.currentTarget.style.backgroundImage=i}),k.addEventListener("mouseout",b=>{b.currentTarget.style.backgroundImage=g}),m.addEventListener("click",()=>{setActiveProduct({category:x,id:a,title:b,price:d,image:g,count:1}),singleItemContainer.classList.add("single-product--open");const k=document.querySelector(".product__images--main"),c=document.querySelector(".thumbnail-image__one"),l=document.querySelector(".thumbnail-image__two"),m=document.querySelector(".thumbnail-image__three"),n=document.querySelector(".thumbnail-image__four"),o=document.querySelector(".product__info h2"),p=document.querySelector(".product__info h3"),q=document.querySelector(".product__info h4"),r=document.querySelector(".product__info p"),s=document.querySelector(".actions__amount");s.textContent="1";const t=document.querySelector(".actions__change--add"),u=document.querySelector(".actions__change--remove");t.addEventListener("click",()=>{let b=parseInt(s.textContent);b++,s.textContent=b}),u.addEventListener("click",()=>{let b=parseInt(s.textContent);b--,1>b&&(b=1),s.textContent=b}),k.style.backgroundImage=g,c.style.backgroundImage=g,l.style.backgroundImage=h,m.style.backgroundImage=i,n.style.backgroundImage=j,o.textContent=b,p.textContent=d,q.textContent=e,r.textContent=f;const v=document.querySelector(".product__images--thumbnail");v.addEventListener("click",c=>{if("product__images--thumbnail"!=c.target.className){const a=c.target.style.backgroundImage;k.style.backgroundImage=a}})},!0)}}catch(b){showResultModal(!1,b.message)}}const modalContainer=document.querySelector(".modal"),closeModalIcon=document.getElementById("close-modal-icon"),openModalHandler=()=>{modalContainer.style.display="block",setTimeout(()=>{modalContainer.style.opacity=1},500);const b=document.getElementById("header-navigation");b.classList.contains("sideNav-open")&&b.classList.remove("sideNav-open")},closeModalHandler=()=>{modalContainer.style.opacity=0,setTimeout(()=>{itemsContainer.innerHTML="",modalContainer.style.display="none"},600)};closeModalIcon.addEventListener("click",closeModalHandler);const previewProduct=c=>{const a=document.getElementById("modal-current-category");a.textContent=c.charAt(0).toUpperCase()+c.slice(1),getProduct(c)};document.querySelector(".products__list").addEventListener("click",c=>{if("A"==c.target.tagName){let a=c.target.textContent.toLowerCase();a=a.replace(" ",""),openModalHandler(),previewProduct(a)}}),document.querySelector(".modal__categories").addEventListener("click",c=>{if("P"==c.target.tagName){let a=c.target.textContent.toLowerCase();a=a.replace(" ",""),previewProduct(a)}});const setActiveProduct=b=>{null!=localStorage.getItem("activeProduct")&&localStorage.removeItem("activeProduct"),localStorage.setItem("activeProduct",JSON.stringify(b))},SingleProductCloseIcon=document.querySelector(".single-product__close-button");SingleProductCloseIcon.addEventListener("click",()=>{singleItemContainer.classList.remove("single-product--open"),localStorage.removeItem("activeProduct")});const SingleProductFavoriteIcon=document.querySelector(".actions__favorite");SingleProductFavoriteIcon.addEventListener("click",()=>{const b=JSON.parse(localStorage.getItem("activeProduct"));addToFavorite(b)});const SingleProductChartIcon=document.querySelector(".actions__chart");SingleProductChartIcon.addEventListener("click",()=>{let c=document.querySelector(".actions__amount");c=parseInt(c.textContent);const d=JSON.parse(localStorage.getItem("activeProduct"));addToChart(d,c)});const addToFavorite=e=>{null==localStorage.getItem("favorite")&&localStorage.setItem("favorite",JSON.stringify([]));const a=JSON.parse(localStorage.getItem("favorite"));let b=!1;for(const c of a)e.category==c.category&&e.id==c.id&&(b=!0);b||(a.push(e),localStorage.setItem("favorite",JSON.stringify(a))),showResultModal(!0,"added to favorites")},removeFromFavorite=c=>{const a=JSON.parse(localStorage.getItem("favorite"));a.splice(c,1),localStorage.removeItem("favorite"),localStorage.setItem("favorite",JSON.stringify(a)),createFavorite(),showResultModal(!0,"removed from favorites")},createFavorite=()=>{null==localStorage.getItem("favorite")&&localStorage.setItem("favorite",JSON.stringify([]));const c=JSON.parse(localStorage.getItem("favorite")),t=document.querySelector(".right-menu__content");t.innerHTML="",c.forEach((b,a)=>{const c=b.category,d=b.id,e=b.image,f=b.price,g=b.title,h=b.count,i={...b},j=document.createElement("div");j.classList.add("content__item");const k=document.createElement("div");k.classList.add("item__image"),k.style.backgroundImage=e,j.appendChild(k);const l=document.createElement("div");l.classList.add("item__info");const m=document.createElement("p");m.classList.add("item__info--title"),m.textContent=g,l.appendChild(m);const n=document.createElement("p");n.classList.add("item__info--price");const o=document.createElement("span");o.setAttribute("id","price__number"),o.textContent=f,n.appendChild(o),l.appendChild(n),j.appendChild(l);const p=document.createElement("div");p.classList.add("item__remove");const q=document.createElement("i");q.classList.add("fas","fa-trash-alt");const r=document.createElement("i");r.classList.add("fas","fa-shopping-basket"),p.appendChild(q),p.appendChild(r),q.addEventListener("click",removeFromFavorite.bind(null,a)),r.addEventListener("click",addToChart.bind(null,i,1)),j.appendChild(p),t.appendChild(j)})},addToChart=(f,a=1)=>{null==localStorage.getItem("chart")&&localStorage.setItem("chart",JSON.stringify([]));const b=JSON.parse(localStorage.getItem("chart"));let c=!1;for(const d of b)f.category==d.category&&f.id==d.id&&(c=!0);c||(f.count!=parseInt(a)&&(f.count=parseInt(a)),b.push(f),localStorage.setItem("chart",JSON.stringify(b))),showResultModal(!0,"added to shopping chart")},removeFromChart=c=>{const a=JSON.parse(localStorage.getItem("chart"));a.splice(c,1),localStorage.removeItem("chart"),localStorage.setItem("chart",JSON.stringify(a)),createChart(),calculateChart(),showResultModal(!0,"removed from shopping chart")},createChart=()=>{null==localStorage.getItem("chart")&&localStorage.setItem("chart",JSON.stringify([]));const c=JSON.parse(localStorage.getItem("chart")),s=document.querySelector(".right-menu__content");s.innerHTML="",c.forEach((b,a)=>{const c=b.category,d=b.id,e=b.image,f=b.price,g=b.title,h=b.count,i=document.createElement("div");i.classList.add("content__item");const j=document.createElement("div");j.classList.add("item__image"),j.style.backgroundImage=e,i.appendChild(j);const k=document.createElement("div");k.classList.add("item__info");const l=document.createElement("p");l.classList.add("item__info--title"),l.textContent=g,k.appendChild(l);const m=document.createElement("p");m.classList.add("item__info--price");const n=document.createElement("span");n.setAttribute("id","price__count"),n.textContent=h,m.appendChild(n),m.innerHTML+=" x ";const o=document.createElement("span");o.setAttribute("id","price__number"),o.textContent=f,m.appendChild(o),k.appendChild(m),i.appendChild(k);const p=document.createElement("div");p.classList.add("item__remove");const q=document.createElement("i");q.classList.add("fas","fa-trash-alt"),p.appendChild(q),p.addEventListener("click",removeFromChart.bind(null,a)),i.appendChild(p),s.appendChild(i)})},calculateChart=()=>{null==localStorage.getItem("chart")&&localStorage.setItem("chart",JSON.stringify([]));const d=JSON.parse(localStorage.getItem("chart"));let e=0;for(const b of d){let c=b.price;c=c.substring(1),c=c.trim(),c=c.replace(",","."),c=parseFloat(c),e+=c*b.count}const a=document.getElementById("footer_total--sum");a.innerHTML="&euro; ",a.innerHTML+=e.toFixed(2)},closeRightMenuIcon=document.querySelector(".right-menu__header--close"),toggleRightMenu=()=>{const c=document.getElementById("header-navigation");c.classList.contains("sideNav-open")&&c.classList.remove("sideNav-open");const a=document.querySelector(".right-menu");a.classList.toggle("right-menu-toggle")};closeRightMenuIcon.addEventListener("click",toggleRightMenu);const openChartMenuIcon=document.getElementById("navigation__icons--chart");openChartMenuIcon.addEventListener("click",()=>{const c=document.querySelector(".right-menu__footer");c.classList.contains("right-menu__footer--close")&&c.classList.remove("right-menu__footer--close");const a=document.querySelector(".footer__checkout");a.textContent="",a.textContent="CHECK OUT",createChart(),calculateChart(),toggleRightMenu()});const openFavoriteMenuIcon1=document.getElementById("navigation__icons--favorite1"),openFavoriteMenuIcon2=document.getElementById("navigation__icons--favorite2");openFavoriteMenuIcon1.addEventListener("click",()=>{const b=document.querySelector(".right-menu__footer");b.classList.contains("right-menu__footer--close")||b.classList.add("right-menu__footer--close"),createFavorite(),toggleRightMenu()}),openFavoriteMenuIcon2.addEventListener("click",()=>{const b=document.querySelector(".right-menu__footer");b.classList.contains("right-menu__footer--close")||b.classList.add("right-menu__footer--close"),createFavorite(),toggleRightMenu()});const hamburgerIcon=document.querySelector(".menu-icon"),sideNavCloseIcon=document.querySelector(".navigation__close-button"),productList=document.getElementById("products-list"),productItems=document.getElementById("products-items"),toggleSideNavClass=()=>{const c=document.querySelector(".right-menu");c.classList.contains("right-menu-toggle")&&c.classList.remove("right-menu-toggle");const a=document.getElementById("header-navigation");a.classList.toggle("sideNav-open")};hamburgerIcon.addEventListener("click",toggleSideNavClass),sideNavCloseIcon.addEventListener("click",()=>{toggleSideNavClass(),productItems.classList.remove("products-open")}),productList.addEventListener("click",()=>{productItems.classList.toggle("products-open")});const homeButton=document.querySelector(".fa-home");homeButton.addEventListener("click",()=>{window.scrollTo(0,0)});let indexId=1;const changeSlideshow=setInterval(()=>{const d=[{url:"url('assets/images/01-slideshow.jpg')",text:"Chair"},{url:"url('assets/images/02-slideshow.jpg')",text:"Spring"},{url:"url('assets/images/03-slideshow.jpg')",text:"New"}],a=document.getElementById("slideshow-text"),b=document.getElementById("slideshow-container");3==indexId&&(indexId=0),b.style.backgroundImage=d[indexId].url,a.textContent=d[indexId].text,indexId++},5e3),openUserModal=()=>{if(null!=sessionStorage.getItem("user")){const b=JSON.parse(sessionStorage.getItem("user"));if(b.status)return void showResultModal(!1,"you are already signed in")}const b=document.querySelector(".user");b.classList.toggle("user-show"),UserSignupModal.style.display="none",showUserLoginModal()},toggleUserModal=()=>{const b=document.querySelector(".user");b.classList.toggle("user-show"),UserSignupModal.style.display="none",showUserLoginModal()},closeUserModalIcon=document.getElementById("close-user");closeUserModalIcon.addEventListener("click",toggleUserModal);const topUserModalIcon=document.getElementById("user-top-icon"),bottomUserModalIcon=document.getElementById("user-bottom-icon"),UserLoginModal=document.querySelector(".user__modal--login"),showUserLoginModal=()=>{UserLoginModal.style.display="flex"};topUserModalIcon.addEventListener("click",openUserModal),bottomUserModalIcon.addEventListener("click",openUserModal);const showUserSignupButton=document.querySelector(".login__button--register"),UserSignupModal=document.querySelector(".user__modal--signup");showUserSignupButton.addEventListener("click",()=>{UserLoginModal.style.display="none",UserSignupModal.style.display="flex"});const loginForm=document.getElementById("login-form"),loginUserName=document.getElementById("login__username"),loginPassword=document.getElementById("login__password");let loginError=!1;const validateLoginUsername=()=>{const b=loginUserName.value.trim();""==b?(loginUserName.style.borderColor="red",document.getElementById("login-username-error").textContent="username field is empty!",loginError=!0):null==b.match(/^[a-zA-Z0-9]+$/)?(loginUserName.style.borderColor="red",document.getElementById("login-username-error").textContent="username is not valid!",loginError=!0):(loginUserName.style.borderColor="green",document.getElementById("login-username-error").textContent="")},validateLoginPassword=()=>{const b=loginPassword.value.trim();""==b?(loginPassword.style.borderColor="red",document.getElementById("login-password-error").textContent="password field is empty!",loginError=!0):(loginPassword.style.borderColor="green",document.getElementById("login-password-error").textContent="")};loginForm.addEventListener("submit",b=>{if(b.preventDefault(),validateLoginUsername(),validateLoginPassword(),!loginError){const b={username:loginUserName.value.trim(),password:loginPassword.value.trim()};try{sendUserInfo("POST","http://localhost/projects/davici/api/user/login.php",b).then(c=>{if("success"==c.status){toggleUserModal(),showResultModal(!0,"user logged in successfully");const a={userName:c.username,status:!0};sessionStorage.setItem("user",JSON.stringify(a))}else showResultModal(!1,c.status)}).catch(b=>{showResultModal(!1,b)})}catch(b){showResultModal(!1,b.message)}}});const sendUserInfo=(d,a,b)=>fetch(a,{method:d,body:JSON.stringify(b),headers:{"Content-Type":"application/json"}}).then(b=>200<=b.status&&300>b.status?b.json():b.json().then(b=>{throw showResultModal(!1,b),new Error("Server-side problem!")})).catch(b=>{throw console.log("im here"),showResultModal(!1,b),new Error("Something went wrong!")}),signupForm=document.getElementById("signup-form"),firstName=document.getElementById("signup__firstname"),lastName=document.getElementById("signup__lastname"),email=document.getElementById("signup__email"),signupUserName=document.getElementById("signup__username"),signupPassword=document.getElementById("signup__password");let signupError=!1;const validateFirstName=()=>{const b=firstName.value.trim();""==b?(firstName.style.borderColor="red",document.getElementById("firstname-error").textContent="first name field is empty!",signupError=!0):null==b.match(/^[a-zA-Z ]+$/)?(firstName.style.borderColor="red",document.getElementById("firstname-error").textContent="first name is not valid!",signupError=!0):(firstName.style.borderColor="green",document.getElementById("firstname-error").textContent="")},validateLastName=()=>{const b=lastName.value.trim();""==b?(lastName.style.borderColor="red",document.getElementById("lastname-error").textContent="last name field is empty!",signupError=!0):null==b.match(/^[a-zA-Z ]+$/)?(lastName.style.borderColor="red",document.getElementById("lastname-error").textContent="last name is not valid!",signupError=!0):(lastName.style.borderColor="green",document.getElementById("lastname-error").textContent="")},validateEmail=()=>{const b=email.value.trim();""==b?(email.style.borderColor="red",document.getElementById("email-error").textContent="email field is empty!",signupError=!0):null==b.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)?(email.style.borderColor="red",document.getElementById("email-error").textContent="email is not valid!",signupError=!0):(email.style.borderColor="green",document.getElementById("email-error").textContent="")},validateRegisterUsername=()=>{const b=signupUserName.value.trim();""==b?(signupUserName.style.borderColor="red",document.getElementById("signup-username-error").textContent="username field is empty!",signupError=!0):null==b.match(/^[a-zA-Z0-9]+$/)?(signupUserName.style.borderColor="red",document.getElementById("signup-username-error").textContent="username is not valid!",signupError=!0):(signupUserName.style.borderColor="green",document.getElementById("signup-username-error").textContent="")},validateRegisterPassword=()=>{const b=signupPassword.value.trim();""==b?(signupPassword.style.borderColor="red",document.getElementById("signup-password-error").textContent="password field is empty!",signupError=!0):(signupPassword.style.borderColor="green",document.getElementById("signup-password-error").textContent="")};signupForm.addEventListener("submit",b=>{if(b.preventDefault(),validateFirstName(),validateLastName(),validateEmail(),validateRegisterUsername(),validateRegisterPassword(),!signupError){const b={firstname:firstName.value.trim(),lastname:lastName.value.trim(),email:email.value.trim(),username:signupUserName.value.trim(),password:signupPassword.value.trim()};try{sendUserInfo("POST","http://localhost/projects/davici/api/user/register.php",b).then(b=>{"success"==b.status?(toggleUserModal(),showResultModal(!0,"user is registered successfully")):showResultModal(!1,b.status)}).catch(b=>{showResultModal(!1,b)})}catch(b){showResultModal(!1,b.message)}}});const copyrightElement=document.getElementById("copyright"),year=new Date().getFullYear();if(2020<year){const b=new Date().getFullYear().toString();copyrightElement.textContent=" - "+b}